\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[swedish]{babel}
\usepackage{amsmath, amsthm, amssymb}
\usepackage{stmaryrd}
\usepackage{tikz}
\usepackage{epstopdf}
\usetikzlibrary{mindmap,trees,arrows,automata}

\usepackage{graphicx}
\usepackage{rotating}
\usepackage{listings}
\usepackage{color}
\usepackage{fancyheadings}
\usepackage{mathpartir}
\usepackage{array}
\usepackage{listings}

% Used for code examples without | a special character
\newenvironment{codeExN}
{\verbatim}
{\endverbatim}


\newcommand{\graybox}[1]{\colorbox{lightgray}{#1}}

% used for code examples where |x| makes a grey box around x
\lstnewenvironment{codeEx}
{\lstset{ basicstyle=\ttfamily
        , moredelim=[is][\graybox]{|}{|}
        } }
{}

% Used for code inside text
\newcommand{\miniCode}[1] {\tt#1\rm}
\newcommand{\ic}[1] {\miniCode{#1}}
\newcommand{\many}[1]{\overline{#1}}



% Used for keywords
\newcommand{\kw}[1]{\texttt{#1}}

% Used for continuations
\newcommand{\cont}[1] {\tt#1\rm}

\newcommand{\NOTE}[1] {


\shadowbox{\begin{minipage}[t]{1\columnwidth}%
Notering!

#1
\end{minipage}}
}

%BNF
\newcommand{\defBNF}[4] {\text{#1}\quad&#2&::=&\;#3&\text{#4}}
\newcommand{\defaltBNF}[2] {&&|&\;#1&\text{#2}}

% things defined in Opt1.tex %

\newcommand{\iIrr}{$\Phi$}
\newcommand{\iPsi}{$\Psi$}
\newcommand{\oOmega}{$\Omega$}

%CBV semantic
\newcommand{\OPTMac}[2]{\text{\large$#1$}\Big[#2\Big]}
\global\long\def\mc#1#2#3{#1\,;\,#2\,;\,#3}
  % stack ; heap ; expr
\global\long\def\OMEGA#1#2#3{\OPTMac{\Omega}{#3\,;\,#1\,;\,#2}}
\global\long\def\PSI#1#2#3{\OPTMac{\Psi}{#3\,;\,#1\,;\,#2}}
\global\long\def\IRR#1#2#3{\OPTMac{\Phi}{#3\,;\,#1\,;\,#2}}


\global\long\def\red#1#2{#1\Rightarrow#2}


\global\long\def\lred#1#2{\begin{array}{c}
 #1\\
\Rightarrow#2\end{array}}


\global\long\def\heap#1#2{H[#1\mapsto#2]}


\global\long\def\nheap#1#2{H[#1\nrightarrow#2]}


\global\long\def\heapp#1#2#3#4{H[#1\mapsto#2\,;\,#3\mapsto#4]}


\global\long\def\OPT#1{OPT(#1)}


\global\long\def\PAP#1#2{PAP(#1\,#2)}

\global\long\def\CON#1#2{CON(#1\,#2)}

\global\long\def\FUN#1#2{FUN(#1\to#2)}


\global\long\def\THUNK#1{THUNK\,#1}


\global\long\def\cOPT#1#2{OPT\,#1\,:\,#2}


\global\long\def\cOFUN#1#2#3{OFUN\,(#1\to\bullet)_{#2}\,:\,#3}


\global\long\def\oCase#1#2{O\mathtt{case}\,\bullet\,\mathtt{of}\,#1\,:\,#2}


\global\long\def\oLet#1#2#3{O\mathtt{let\,}#1=THUNK\,\bullet\,\mathtt{in}\,#2\,:\,#3}


\global\long\def\oLetObj#1#2#3{O\mathtt{let\,}#1=#2\,\mathtt{in}\,\bullet\,:\,#3}


\global\long\def\oFun#1#2#3{OFUN\,#1\,#2\,:\,#3}


\global\long\def\oInline#1{OInlining\,:\,#1}


\global\long\def\BH{BLACKHOLE}


\global\long\def\eCase#1#2{\mathtt{case}\,#1\,\mathtt{of}\,#2}


\global\long\def\eLet#1#2#3{\mathtt{let}\,#1=#2\,\mathtt{in}\,#3}


% CBN %
\global\long\def\CBNMC#1#2#3#4{#1;#2;#3;#4}

\global\long\def\CBNOMEGA#1#2#3#4{\OPTMac{\Omega}{#4;#1;#2;#3}}
\global\long\def\CBNPSI#1#2#3#4#5{\OPTMac{\Psi}{#5;#1;#2;#3;#4}}
\global\long\def\CBNIRR#1#2#3#4{\OPTMac{\Phi}{#4;#1;#2;#3}}

% pixxX %

\newcommand{\overviewIntro}
{
\begin{center}
\begin{tikzpicture}
\path[mindmap,concept color=black,text=white]
node[concept] {Tolk}
[clockwise from=30]
child[concept color=green!50!black] {
  node[concept] {Frontend}
  [clockwise from=90]
  child { node[concept] {Parser} }
  child { node[concept] {Avsockrare} }
  child { node[concept] {Lambda- lyftare} }
}
child[concept color=red!50!black] {
    node[concept] {Core}
    [counterclockwise from=200]
    child[concept] { node[concept] {STG} }
    %child[concept] { node[concept] {Garbage Collector} }
    child[concept color=blue!50!black] {
        node[concept] {Optimise}
        [clockwise from=20]
        child { node[concept] {Omega} }
        child { node[concept] {Psi} }
        child { node[concept] {Irr} }
        child { node[concept] {After burner} }
    }
};
%    child[concept color=orange] { node[concept] {theoretical} };
\end{tikzpicture}
\end{center}
}

\newcommand{\overviewCore}
{
\begin{center}
\begin{tikzpicture}%[transform canvas={scale=0.5}]
    \path[mindmap,scale=0.75,concept color=red!50!black,text=white]
        node[concept,scale=0.75] {Core}
        [counterclockwise from=200]
        child[concept,scale=0.95] { node[concept] {STG} };
\end{tikzpicture}
\end{center}
}

\newcommand{\overviewOptimise}
{
\begin{center}
\begin{tikzpicture}%[transform canvas={scale=0.5}]
    \path[mindmap,scale=0.75,concept color=blue!50!black,text=white]
        node[concept,scale=0.75] {Optimise}
        [clockwise from=20]
        child { node[concept,scale=0.95] {Omega} }
        child { node[concept,scale=0.95] {Psi} }
        child { node[concept,scale=0.95] {Irr} }
        child { node[concept] {After burner} };
\end{tikzpicture}
\end{center}
}

\newcommand{\overviewSugar}
{
\begin{center}
\begin{tikzpicture}%[transform canvas={scale=0.5}]
    \path[mindmap,scale=0.75,concept color=green!50!black,text=white]
        node[concept,scale=0.75] {Frontend}
        [clockwise from=90]
        child { node[concept,scale=0.95] {Parser} }
        child { node[concept,scale=0.95] {Avsockrare} }
        child { node[concept,scale=0.95] {Lambda- lyftare} };
\end{tikzpicture}
\end{center}
}

\newcommand{\stgOptimise}
{
\begin{center}
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=2.8cm,
                    semithick]
    \tikzstyle{every state}=[fill=blue,draw=none,text=white]
    \node[state,fill=red!50!black](stg)   {STG};
    \node[state](omega) [below of=stg]          {$\Omega$};
    \node[state](psi)   [below right  of=omega]  {$\Psi$};
    \node[state](irr)   [below left of=omega]  {$\Phi$};
    \path (stg)   edge[line width=2pt, bend left] node {start} (omega)
                  edge[bend left] node {} (psi)
          (omega) edge node {} (psi)
                  edge node {} (irr)
                  edge[bend left] node {} (stg)
          (irr)   edge node {} (omega)
                  edge[line width=2pt,bend left] node {stopp} (stg)
          (psi)   edge node {} (omega)
                  edge node {} (irr);
          
    
    
\end{tikzpicture}
\end{center}
}
